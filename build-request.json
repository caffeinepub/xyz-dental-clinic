{
  "kind": "build_request",
  "title": "Fix admin panel appointments not loading",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the admin panel Appointments page so that appointments load correctly. The root cause is in AdminGuard's sessionStorage checks, auth state passing, or backend authorization validation. Ensure that when an admin is authenticated, the AdminGuard correctly reads 'adminAuth' from sessionStorage, passes valid auth state to child routes, and the backend's role/authorization check for fetching all appointments succeeds without error.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "now solve this new problem"
        ]
      },
      "acceptanceCriteria": [
        "Admin can log in via the hidden admin login modal and be redirected to the admin dashboard without errors.",
        "Navigating to the admin Appointments page loads and displays all appointments without a login error or empty state caused by auth failure.",
        "AdminGuard correctly reads 'adminAuth' from sessionStorage and does not redirect authenticated admins to the home page.",
        "The backend authorization check for fetching all appointments returns data successfully when called by an authenticated admin session.",
        "No console errors related to authentication or authorization appear when loading the Appointments page as an admin."
      ]
    }
  ],
  "constraints": [
    "Do not modify files listed in frontend.immutablePaths.",
    "All Motoko logic must remain in the single backend/main.mo actor file."
  ],
  "nonGoals": [
    "Redesigning the admin UI layout or styling.",
    "Adding new appointment features or fields.",
    "Changing the admin login credentials or authentication mechanism."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}